@model PointOfSale.Models.ViewModels.DeliveryNoteVM
@{

    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://kit.fontawesome.com/ae360af17e.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>

        @@import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');

        *,
        ::after,
        ::before {
            box-sizing: border-box;
        }



        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            background-color: #1a2226;
            background-repeat: no-repeat;
            background-position: center bottom;
            background-size: cover;
        }

        main {
            /* background-color: #F1F6F9; */
            background-color: #fff;
        }

        h1 {
            font-size: 2rem;
        }

        h2 {
            font-size: 1.5rem;
        }

        h3 {
            font-size: 1.2375rem;
            color: #212A3E;
        }

        a {
            cursor: pointer;
            text-decoration: none;
            font-family: 'Poppins', sans-serif;
        }

        li {
            list-style: none;
        }

        p {
            color: #212A3E;
        }

        /* Layout skeleton */

        .wrapper {
            align-items: stretch;
            display: flex;
            width: 100%;
        }

        #sidebar {
            max-width: 264px;
            min-width: 264px;
            transition: all 0.35s ease-in-out;
            box-shadow: 0 0 35px 0 rgba(49, 57, 66, 0.5);
            z-index: 1111;
            height: 100vh;
            position: fixed;
            overflow: scroll;
            overflow-x: hidden;
        }

            #sidebar::-webkit-scrollbar {
                width: 5px;
                background-color: #212A3E;
            }


            /* Sidebar collapse */

            #sidebar.collapsed {
                margin-left: -264px;
            }

        .main-box {
            margin-left: 264px;
        }

        .user-manu {
            display: flex;
            justify-content: center;
            align-items: center;
        }


        .main {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            width: 100%;
            overflow: hidden;
            transition: all 0.35s ease-in-out;
        }

        .sidebar-logo {
            padding: 1.15rem 1.5rem;
        }

            .sidebar-logo a.logo {
                color: #e9ecef;
            }

            .sidebar-logo a {
                color: #e9ecef;
                font-size: 1.25rem;
                font-weight: 600;
            }

        .sidebar-nav {
            padding: 0;
        }

        .sidebar-header {
            color: #e9ecef;
            font-size: .75rem;
            padding: 1.5rem 1.5rem .375rem;
        }

        a.sidebar-link {
            padding: .625rem 1.625rem;
            color: #e9ecef;
            position: relative;
            display: block;
            font-size: .8rem;
        }

            a.sidebar-link:focus {
                color: #e9ecef;
            }

            a.sidebar-link:active {
                color: #e9ecef;
            }

            a.sidebar-link.collapsed {
                color: #e9ecef;
            }

        .sidebar-link[data-bs-toggle="collapse"]::after {
            border: solid;
            border-width: 0 .075rem .075rem 0;
            content: "";
            display: inline-block;
            padding: 2px;
            position: absolute;
            right: 1.5rem;
            top: 1.4rem;
            transform: rotate(-135deg);
            transition: all .2s ease-out;
        }

        .sidebar-link[data-bs-toggle="collapse"].collapsed::after {
            transform: rotate(45deg);
            transition: all .2s ease-out;
        }

        .navbar-toggler-icon {
            color: white;
        }

        .btn-bars {
            border: 1px solid white;
        }

        .login-btn {
            width: 100%;
            display: flex;
            justify-content: end;
            margin-right: 2rem;
        }

        .content {
            flex: 1;
            max-width: 100vw;
            width: 100vw;
        }

        /* Responsive */

        @@media (min-width:768px) {
            .content {
                width: auto;
            }
        }
        @@media (max-width:768px){
    .user-title{
        display:none
    }
}




        .required-warning {
            color: darkred;
        }

        .btn {
            font-size: .8rem;
            padding: 3px 12px;
        }

        .btn-column {
            display: flex;
            align-content: center;
            justify-content: center;
        }



        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        p {
            margin: 0;
        }


        .invoice {
            border:2px solid rgba(49, 57, 66, 0.5);
            max-width: 850px;
            margin-top: 1rem;
            margin-right: auto;
            margin-left: auto;
            align-items: center;
            min-height: 100vh;
            padding: 1rem 2rem;
        }

        .invoice-header {
            border: 1px double black;
            padding-top: 1rem;
            margin-bottom: 0;
        }

        .row.contact-info {
            margin: .2rem 0;
        }

        .shop-info p {
            font-size: .65rem;
            font-weight: bold;
        }

        .trn-no {
            margin-top: 15.59px;
            text-align: center;
        }

        .email-field {
            white-space: nowrap;
        }

        .logo {
            text-align: center;
            font-weight: bold;
        }

        .logo-en {
            font-size: 1.5rem;
            text-align: center;
            font-weight: bold;
            color: #004976;
        }

        .logo-ar {
            font-size: 1.9rem;
            text-align: center;
            font-weight: bold;
            color: #004976;
        }

        .row {
            padding: 0;
            margin: 1rem 0;
            font-size: .7rem;
        }

        .middle-card {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .invoice-info {
            border: 1px solid black;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: bold;
        }

        .invoice-no {
            align-items: start;
        }

        .payment-method {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            font-size: 0.5rem;
        }


        .row.customer-info {
            border: 1px double black;
            margin-top: .3rem;
        }

        .customer-info
        p {
            font-size: .7rem;
            font-weight: bold;
        }

        .items-section {
            min-height: 53vh;
        }


        /* Tbl  */
        table {
            font-family: arial, sans-serif;
            width: 100%;
            font-size: 14px;
            border-collapse: collapse;
        }

            table thead th {
                color: #ffffff;
                background: #004976;
                padding: 10px;
                border: 1px solid #ebebec;
                font-weight: 500;
            }

            table tr {
                background: #ffffff;
            }

                table tr td {
                    border-bottom: 1px solid #e6edf1;
                    padding: 4px;
                    font-size: .8rem;
                    padding: 5px 10px;
                }

        .row.amount-inword {
            font-size: .7rem;
            font-weight: bold;
        }

        @@media only screen and (max-width: 640px) {
            table thead {
                display: none;
            }

            table tbody {
                display: block;
            }

                table tbody tr td {
                    display: flex;
                    align-items: center;
                    padding: 0;
                }

                table tbody tr {
                    margin-bottom: 20px;
                    display: block;
                    border: 1px solid #004976;
                    background: #f9f9f9;
                    overflow: hidden;
                }

                table tbody td::before {
                    content: attr(data-label);
                    font-weight: bold;
                    width: 30%;
                    display: flex;
                    background: #004976;
                    color: #fff;
                    padding: 10px;
                    margin-inline-end: 10px;
                }
        }

        .invoice-footer{
            border-top: 1px solid black;
            padding-top: 1rem;
        }
        .row.signiture {
            margin-top:3.5rem;
            font-weight: bold;
            font-size: .8rem;
        }

        @@media print {
            body {
                -webkit-print-color-adjust: exact;
                background-color: white;
            }
        }

        @@page {
            size: auto;
            margin: 10mm 10mm 0mm 10mm;
        }

    </style>


</head>
<body>






    <div class="wrapper">
        <!-- Sidebar -->
        <aside id="sidebar">
            <div class="h-100">
                <div class="sidebar-logo">
                    <a asp-area="Admin" asp-controller="Home" asp-action="Index" class="logo">Anwar Al Rahmania</a>
                </div>
                <!-- Sidebar Navigation -->
                <ul class="sidebar-nav">

                    @* Home *@

                    <li class="sidebar-item">

                        <a class="sidebar-link" asp-area="Admin" asp-controller="Home" asp-action="Index">

                            <i class="fa-solid fa-house pe-2"></i>
                            Home
                        </a>
                    </li>
                    @*Create  Invoice *@
                    <li class="sidebar-item">

                        <a class="sidebar-link" asp-area="Admin" asp-controller="Invoice" asp-action="Create">
                            <i class="fa-regular fa-square-plus pe-2"></i>
                            Create Invoice
                        </a>
                    </li>
                    @* Add New Products *@
                    <li class="sidebar-item">

                        <a class="sidebar-link" asp-area="Admin" asp-controller="Product" asp-action="Upsert">
                            <i class="fa-solid fa-square-parking pe-2"></i>
                            Add New Product
                        </a>
                    </li>
                    <li class="sidebar-item">

                        <a class="sidebar-link" asp-area="Admin" asp-controller="DeliveryNote" asp-action="Index">
                            @* <i class="fa-solid fa-newspaper pe-2"></i> *@
                            <i class="fa-regular fa-file-lines pe-2"></i>

                            Delivery Note List
                        </a>
                    </li>
                    @* Inventory *@
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link collapsed" data-bs-toggle="collapse" data-bs-target="#pages"
                           aria-expanded="false" aria-controls="pages">



                            <i class="fa-solid fa-coins pe-2"></i>
                            Inventory
                        </a>
                        <ul id="pages" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a class="sidebar-link ps-5" asp-area="Admin" asp-controller="Product" asp-action="Index">Products</a>
                            </li>
                            <li class="sidebar-item">

                                <a class="sidebar-link ps-5" asp-area="Admin" asp-controller="Category" asp-action="Index">Category</a>
                            </li>

                            <li class="sidebar-item">

                                <a class="sidebar-link ps-5" asp-area="Admin" asp-controller="Supplier" asp-action="Index">

                                    Supplier
                                </a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link ps-5" asp-area="Admin" asp-controller="Product" asp-action="Index" asp-route-status="lowStock">Low Stock</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link ps-5" asp-area="Admin" asp-controller="Product" asp-action="Index" asp-route-status="outOfStock">Out of Stock</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link collapsed" data-bs-toggle="collapse" data-bs-target="#dashboard"
                           aria-expanded="false" aria-controls="dashboard">
                            <i class="fa-solid fa-pen-to-square pe-2"></i>
                            Invoice
                        </a>
                        <ul id="dashboard" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a class="sidebar-link ps-5" asp-area="Admin" asp-controller="Invoice" asp-action="Index">Invoice List</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link ps-5" asp-area="Admin" asp-controller="Invoice" asp-action="Create">Create Invoice</a>
                            </li>
                        </ul>
                    </li>

                    @* Customer *@

                    <li class="sidebar-item">
                       
                        <a class="sidebar-link" asp-area="Admin" asp-controller="Customer" asp-action="Index">


                            <i class="fa-solid fa-user-large pe-2"></i>
                            Customers
                        </a>
                    </li>


                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link collapsed" data-bs-toggle="collapse" data-bs-target="#settings"
                           aria-expanded="false" aria-controls="settings">
                            <i class="fa-solid fa-gear pe-2"></i>
                            Settings
                        </a>
                        <ul id="settings" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a class="sidebar-link ps-5" asp-area="Admin" asp-controller="Company" asp-action="Edit">Company Info</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link ps-5" asp-area="Admin" asp-controller="Vat" asp-action="Edit">VAT Info</a>
                            </li>
                            <li class="sidebar-item">
                                <a class="sidebar-link ps-5" asp-area="Admin" asp-controller="UnitOfMeasurement" asp-action="Index">Units Of Measure</a>
                            </li>

                            <li class="sidebar-item">
                                <a class="sidebar-link ps-5" asp-area="Identity" asp-controller="Account" asp-action="Register">Add New User</a>
                            </li>

                        </ul>
                    </li>


                </ul>
            </div>
        </aside>
        <!-- Main Component -->
        <div id="main" class="main main-box">
            <nav class="navbar navbar-expand px-3 border-bottom">
                <!-- Button for sidebar toggle -->
                <button class="btn btn-bars" type="button" data-bs-theme="dark">
                    <span class="navbar-toggler-icon"><i class="fa-solid fa-bars"></i></span>
                </button>
                <div class="login-btn">
                    <partial name="_LoginPartial" />
                </div>
            </nav>
            <main class="content px-3 py-2">
                <div class="container-fluid">
                    <div class="mb-3">


                        <div class="col-10 mt-4 text-end">
                            <a class="btn btn-primary" asp-controller="DeliveryNote" asp-action="Edit" asp-route-id="@Model.DeliveryNoteHeader.Id">Edit</a>
                            <a class="btn btn-primary" onclick="printDiv('printArea')">Print</a>

                        </div>

                        <div class="invoice printArea" id="printArea">
                            <!-- Invoice Header Section -->
                            <section>
                                <div class="invoice-header">
                                    <div class="logo">
                                        <h1 class="logo-ar">@Model.Company.AribicName</h1>
                                        <h1 class="logo-en">@Model.Company.Name</h1>
                                    </div>
                                    <!-- Phone & Address Section  -->
                                    <section>
                                        <div class="row shop-info">
                                            <div class="col-4">
                                                <p>Mobile: @Model.Company.PhoneNumber1</p>
                                                <p>Mobile: @Model.Company.PhoneNumber2</p>
                                                <p>Address: @Model.Company.Address</p>
                                                <p>P.O. Box No: @Model.Company.PostOfficeNo </p>
                                            </div>
                                            <div class="col-4 middle-card">
                                                <div>
                                                    <div class="trn-no">
                                                        <div class="trn-content">
                                                            <p>TRN : @Model.Company.TRN</p>
                                                            @if(@Model.DeliveryNoteHeader.CustTrn !=null){
                                                            <p>Cust.TRN: @Model.DeliveryNoteHeader.CustTrn</p>
                                                            }
                                                          
                                                            <p class="email-field">Email : @Model.Company.Email</p>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="col-4 text-end">
                                                <p>متحرك: @Model.Company.AribicPhoneNumber1 </p>
                                                <p>متحرك: @Model.Company.AribicPhoneNumber2 </p>
                                                <p>عنوان : @Model.Company.AribicAddress   </p>
                                                <p>ص . ب: @Model.Company.AribicPostOfficeNo </p>


                                            </div>
                                        </div>
                                    </section>
                                    <!-- Customer Related Info -->

                                </div>




                                <div class="row contact-info">
                                    <div class="col-4 invoice-info invoice-no"><P>NO : DN - @Model.DeliveryNoteHeader.Id</P></div>
                                    <div class="col-4 text-center invoice-info">
                                       <P>Delivery Note</P>
                                    </div>
                                    <div class="col-4 text-center invoice-info payment-method">
                                        <input type="checkbox">
                                        <label for="">Cash </label>
                                        <input type="checkbox">
                                        <label for="">Credit </label>
                                        <input type="checkbox">
                                        <label for="">Credit Card </label>
                                        <input type="checkbox">
                                        <label for="">Cheque</label>

                                    </div>
                                </div>



                                <div class="row customer-info">
                                    <div class="col-4 mt-1">
                                        <p>Name : @Model.DeliveryNoteHeader.Name</p>
                                        @* <p>Address : @Model.DeliveryNoteHeader.Address </p> *@
                                    </div>

                                    <div class="col-4 ps-0 mt-1">
                                        <p>Phone : @Model.DeliveryNoteHeader.PhoneNumbar</p>
                                        @* <p>D.Location :@Model.DeliveryNoteHeader.Address </p> *@
                                    </div>
                                    <div class="col-4 ps-0 mt-1">
                                        <p>Date: @Model.DeliveryNoteHeader.CreatedAt.ToString("dd/MM/yyyy")</p>
                                        @* <p>Delivary Date : @Model.DeliveryNoteHeader.CreatedAt.ToString("dd/MM/yyyy")</p> *@
                                    </div>
                                    <div class="col-8 my-1">

                                        <p>Address : @Model.DeliveryNoteHeader.Address </p>
                                    </div>


                         @*            <div class="col-4">

                                        <p>Delivary Date : @Model.DeliveryNoteHeader.CreatedAt.ToString("dd/MM/yyyy")</p>
                                    </div> *@

                                </div>
                               
                                   

                                
                            </section>




                            <section>
                                <div class="items-section">

                                    <table width="100%">
                                        <thead>
                                            <tr>
                                                <th class="text-center" style="width: 10%;">#</th>
                                                <th>Items Descriptions</th>
                                                <th class="text-end">Qty</th>
                                                <th></th>

                                            </tr>
                                        </thead>
                                        <tbody>
                                            @{
                                                int index = 1;
                                            }

                                            @foreach (var items in Model.DeliveryNoteDetails)
                                            {

                                                <tr>
                                                    <td class="text-center">@index</td>
                                                    <td>@items.Product.Name</td>

                                                    <td class="text-end">@items.Count</td>
                                                    @foreach (var unit in Model.UnitsOfMeasurement)
                                                    {
                                                        @if (items.Product.UnitsOfMeasurementId == unit.Id)
                                                        {
                                                            <td class="p-0">@unit.Name</td>
                                                        }
                                                    }


                                                </tr>
                                                index++;
                                            }



                                        </tbody>
                                    </table>
                                </div>
                                </section>
                              
                                
                            <!-- Footer Section  -->
                            <section>
                                <div class="row invoice-footer">
                                    <div class="col-6 p-0">
                                        <p class="fw-bold">D.D DUCAB - CLIPSAL -ABB -PHILIPS - AND LITTING</p>
                                        <p>Goods received in Perfect Condition: </p>
                                    </div>
                                    <div class="col-6 p-0">
                                        <p class="fw-bold">*RaK - GERMANY - P.PR - PIPE - NATIONAL PIPE AND SANITARY FITTING AVAILABLE HERE </p>
                                    </div>
                                </div>

                                <div class="row signiture">
                                    <div class="col-6 p-0">Customer Signiture</div>
                                        <div class="col-6 p-0 text-end">

                                        <span class="me-4">Salesman Signiture</span>
                                    </div>
                                </div>
                            </section>


                        </div>

                    </div>
                </div>
            </main>
        </div>
    </div>












    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/page.js"></script>
    <script>
        const tables = document.querySelectorAll("table");
        if (tables) {
            tables.forEach((table) => {
                const headerRow = table.querySelector("thead tr");
                const thElements = headerRow.querySelectorAll("th");
                const tdElements = table.querySelectorAll("tbody tr td");
                const tr = table.querySelectorAll("tbody tr");

                let mainIndex = 0;
                tdElements.forEach((td) => {
                    let index = mainIndex / tdElements.length;
                    td.setAttribute("data-label", thElements[mainIndex].innerHTML);

                    if (mainIndex == thElements.length - 1) {
                        mainIndex = 0;
                    } else {
                        mainIndex += 1;
                    }
                });
            });
        }




        function printDiv(divName) {
            var printContents = document.getElementById(divName).innerHTML;
            var originalContents = document.body.innerHTML;

            document.body.innerHTML = printContents;

            window.print();

            document.body.innerHTML = originalContents;

        }
    </script>
</body>
</html>