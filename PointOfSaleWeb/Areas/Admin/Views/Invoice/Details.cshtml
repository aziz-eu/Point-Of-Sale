@model PointOfSale.Models.ViewModels.InvoiceVM
@{
    
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        *{
    padding: 0;
    margin: 0;
    box-sizing: border-box;
    
}

p{
    margin: 0;
  
}


.invoice{
  max-width: 850px;
  margin-right: auto;
  margin-left: auto;
  align-items: center;
  min-height: 100vh;
  padding: 1rem 2rem;
}
.invoice-header{
    border: 1px double black;
    padding-top: 1rem;
    margin-bottom: 0;
   
}

.row.contact-info{
  margin: .2rem 0;
}
.shop-info p{
  font-size: .65rem;
  font-weight: bold;
}

.trn-no{
  margin-top: 15.59px;
  text-align: center;

}


.logo{
    text-align: center;
    font-weight: bold;
    
}
.logo-en{
    font-size: 1.5rem;
    text-align: center;
    font-weight: bold;
    color: #004976;
}
.logo-ar{
    font-size: 1.9rem;
    text-align: center;
    font-weight: bold;
    color: #004976;
}
.row{
    padding: 0;
    margin: 1rem 0 ;
    font-size: .6rem;
}

.middle-card{
    display: flex;
    flex-direction: column;
    align-items: center;
}
.invoice-info{
  border: 1px solid black;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  font-weight: bold;
}
.invoice-no{
  align-items: start;
}
.payment-method{
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  font-size: 0.5rem;
}


.row.customer-info{
  border: 1px double black;
  margin-top: .3rem;

}

.customer-info
 p{
    font-size: .9rem;
    font-weight: bold;
   
}

.items-section{
    min-height: 40vh;
}


/* Tbl  */
table {
    font-family: arial, sans-serif;
    width: 100%;
    font-size: 14px;
    border-collapse: collapse;
  }
  
  table thead th {
    color: #ffffff;
    background: #004976;
    padding: 10px;
    border: 1px solid #ebebec;
    font-weight: 500;
  }
  
  table tr {
    background: #ffffff;
  }
  
  table tr td {
    border-bottom: 1px solid #e6edf1;
    padding: 4px;
    font-size: .8rem;
    padding: 5px 10px;
  }
  
  .row.amount-inword{
    font-size: .7rem;
    font-weight: bold;

  }
  @@media only screen and (max-width: 640px) {
    table thead {
      display: none;
    }
  
    table tbody {
      display: block;
    }
  
    table tbody tr td {
      display: flex;
      align-items: center;
      padding: 0;
    }
  
    table tbody tr {
      margin-bottom: 20px;
      display: block;
      border: 1px solid #004976;
      background: #f9f9f9;
      overflow: hidden;
    }
  
    table tbody td::before {
      content: attr(data-label);
      font-weight: bold;
      width: 30%;
      display: flex;
      background: #004976;
      color: #fff;
      padding: 10px;
      margin-inline-end: 10px;
    }
  }
  .row.signiture{
    font-weight: bold;
    font-size: .8rem;
  }

  @@media print {
    body {-webkit-print-color-adjust: exact;}
    }
    @@page { size: auto;
      margin: 10mm 10mm 0mm 10mm;   }


    </style>
    

</head>
<body>

    <div class="col-10 mt-4 text-end">
        <a class="btn btn-primary" asp-controller="Invoice" asp-action="Edit" asp-route-id="@Model.InvoiceHeader.Id">Edit</a>
   
        <a class="btn btn-primary" onclick="printDiv('printArea')">Print</a>
    </div>
   
    <div class="invoice printArea" id="printArea"  >
        <!-- Invoice Header Section -->
        <section>
        <div class="invoice-header">
            <div class="logo">
            <h1 class="logo-ar">@Model.Company.AribicName</h1>
                    <h1 class="logo-en">@Model.Company.Name</h1>
            </div>
            <!-- Phone & Address Section  -->
            <section >
            <div class="row shop-info">
                <div class="col-4">
                    <p>Mobile: @Model.Company.PhoneNumber1</p>
                            <p>Mobile: @Model.Company.PhoneNumber2</p>
                    <p>Address: @Model.Company.Address</p>
                    <p>P.O. Box 12033 </p>
                </div>
                <div class="col-4 middle-card">
              <div>
                <div class="trn-no">
                  <div class="trn-content">
                    <p>TRN : @Model.Company.TRN</p>
                    <p>Clst.TRN: @Model.Company.ClstTRN</p>
                    <p>Email : @Model.Company.Email</p>
                </div>
                </div>
                    
                </div>
                </div>
                <div class="col-4 text-end">
                    <p>متحرك: @Model.Company.AribicPhoneNumber1 </p>
                            <p>متحرك: @Model.Company.AribicPhoneNumber2 </p>
                    <p>لعنوان: @Model.Company.AribicAddress</p>
                    <p>ص.ب. ١٣٠٥٣</p>
                  

                </div>
                </div>
            </section>
            <!-- Customer Related Info -->
          
            </div>  


        
          
                <div class="row contact-info">
                <div class="col-4 invoice-info invoice-no"><P>INVOICE NO: @Model.InvoiceHeader.Id</P></div>
                    <div class="col-4 text-center invoice-info">
                        <P>فاتورة الضريبية</P>
                        <P>TAX INVOICE</P>
                    </div>
                    <div class="col-4 text-center invoice-info payment-method">
                        <input type="checkbox">
                        <label for="">Cash </label>
                        <input type="checkbox">
                        <label for="">Credit </label>
                        <input type="checkbox">
                        <label for="">Credit Card </label>
                        <input type="checkbox">
                        <label for="">Cheque</label>
                        
                    </div>
                </div>
            
         
       
            <div class="row customer-info">
                <div class="col-4">
                    <p>Name : @Model.InvoiceHeader.Name</p>
                    <p>Address : @Model.InvoiceHeader.Address </p>
                </div>

                <div class="col-4">
                    <p>Phone : @Model.InvoiceHeader.PhoneNumbar</p>
                    <p>D.Location :@Model.InvoiceHeader.Address </p>
                </div>
                <div class="col-4">
                   <p>Date: @Model.InvoiceHeader.CreatedAt.ToString("d")</p>
                    <p>Delivary Date : @Model.InvoiceHeader.CreatedAt.ToString("d")</p>
                </div>
                 
                </div>
          
            </section>
         



          <section>
          <div class="items-section">
            
            <table width="100%">
                <thead>
                  <tr>
                    <th class="text-center" style="width: 10%;">#</th>
                    <th>Product</th>
                    <th class="text-end">Unit Price</th>
                    <th class="text-end">Qty</th>
                    <th></th>
                    <th class="text-end">Total</th>
                  </tr>
                </thead>
                <tbody>
                        @{
                            int index = 1;
                        }
                 
                        @foreach(var items in Model.InvoiceDetails)
                        {  

                        <tr>
                        <td class="text-center">@index</td>
                        <td>@items.Product.Name</td>
                        <td class="text-end">@items.Price</td>
                        <td class="text-end">@items.Count</td>
                        <td class="p-0">@items.Product.UnitsOfMeasurement</td>
                        <td class="text-end">@(items.Price* items.Count)</td>    
                        </tr>
                                index++;
                        }
         
                   

                </tbody>
             </table>
          </div>
             <!-- Calculation -->
            <section>
                <div class="row amount-inword">
                    <div class="col-6 ps-0"><p>Invoice Total Amount(In Word) :<br> @Model.AmountInWord AED Only </p></div>
                    <div class="col-6 p-0 calculation">
                        <table width="100%">
                            <tbody>
                                <tr>
                                    <td class="text-end">Sub Total</td>
                                    <td class="text-end">@Model.InvoiceHeader.SubTotal</td>
                                </tr>
                                <tr>
                                    <td class="text-end">VAT (@Model.VatPercentage)</td>
                                    <td class="text-end">@Model.InvoiceHeader.Vat</td>
                                </tr>
                                <tr>
                                    <td class="text-end">Total (AED)</td>
                                    <td class="text-end">@Model.InvoiceHeader.Total</td>
                                </tr>
                                @if (@Model.InvoiceHeader.UnpaidAmount > 0)
                                {
                                    <tr>
                                        <td class="text-end">Paid</td>
                                        <td class="text-end">@Model.InvoiceHeader.PaidAmount</td>
                                    </tr>
                                    <tr>
                                        <td class="text-end">Due</td>
                                        <td class="text-end">@Model.InvoiceHeader.UnpaidAmount</td>
                                    </tr>
                                }
                            </tbody>
                            </table>
                    </div>
                </div>
            </section>
          
          </section>
          <!-- Footer Section  -->
          <section>
            <div class="row">
                <div class="col-6 p-0">
                    <p class="fw-bold">D.D DUCAB - CLIPSAL -ABB -PHILIPS - AND LITTING</p>
                    <p>Goods received in Perfect Condition: </p>
                </div>
                <div class="col-6 p-0">
                    <p class="fw-bold">*RaK - GERMANY - P.PR - PIPE - NATIONAL PIPE AND SANITARY FITTING AVAILABLE HERE </p>
                </div>
               </div>
    
               <div class="row mt-5 signiture">
                <div class="col-6 p-0">Customer Signiture:</div>
                <div class="col-6 p-0">
                    
                   <span class="text-center ms-5">Salesman Signiture:</span> 
                </div>
               </div>
          </section>
          

        </div>
      
   
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script src="code.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script>
        const tables = document.querySelectorAll("table");
if (tables) {
  tables.forEach((table) => {
    const headerRow = table.querySelector("thead tr");
    const thElements = headerRow.querySelectorAll("th");
    const tdElements = table.querySelectorAll("tbody tr td");
    const tr = table.querySelectorAll("tbody tr");

    let mainIndex = 0;
    tdElements.forEach((td) => {
      let index = mainIndex / tdElements.length;
      td.setAttribute("data-label", thElements[mainIndex].innerHTML);

      if (mainIndex == thElements.length - 1) {
        mainIndex = 0;
      } else {
        mainIndex += 1;
      }
    });
  });
}




function printDiv(divName){
  var printContents = document.getElementById(divName).innerHTML;
  var originalContents = document.body.innerHTML;

  document.body.innerHTML = printContents;

  window.print();

  document.body.innerHTML = originalContents;

}
    </script>
</body>
</html>